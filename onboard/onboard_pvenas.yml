---
# _____________________________________________________________________________
- name: Setup Mounts
  hosts: pvenas
  gather_facts: false
  become: true
  collections:
    - ansible.posix
  tasks:
    - name: Add directories for HDDs
      ansible.builtin.file:
        path: '{{ item }}'
        state: directory
        mode: '0755'
      loop:
        - /srv
        - /srv/Zidane
        - /srv/Vivi
        - /srv/Garnet
        - /srv/Amarant
        - /srv/Freya
        - /srv/Eiko

    - name: Mount up device by label
      ansible.posix.mount:
        path: '/srv/{{ item }}'
        src: 'LABEL={{ item }}'
        fstype: ext4
        state: mounted
      loop:
        - Zidane
        - Vivi
        - Garnet
        - Amarant
        - Freya
        - Eiko

    - name: Copy SMART check script
      ansible.builtin.copy:
        src: scripts_adhoc/pvenas_checksmart.sh
        dest: /root/checksmart.sh
        owner: root
        group: root
        mode: '0700'

    - name: Copy midnight commander script
      ansible.builtin.copy:
        src: scripts_adhoc/pvenas_mc.sh
        dest: /root/mc.sh
        owner: root
        group: root
        mode: '0700'

    - name: Copy perms script
      ansible.builtin.copy:
        src: scripts_adhoc/pvenas_perms.sh
        dest: /root/perms.sh
        owner: root
        group: root
        mode: '0700'
