---
# _____________________________________________________________________________
- name: Basic setup for qbt torrent box
  hosts: qbt
  gather_facts: false
  become: true
  # collections:
  #   - community.general
  tasks:
    - name: Reminder
      ansible.builtin.debug:
        msg: Actually make this playbook

- name: Update all my apt based linux hosts
  hosts: qbt
  become: true
  tasks:
    - name: Install a list of packages
      ansible.builtin.apt:
        install_recommends: false
        pkg:
          - qbittorrent-nox
        state: present

  # _____________________________________________________________________________
- name: Setup telegraf
  hosts: qbt
  gather_facts: false
  become: true
  tasks:
    - name: Copy podc telegraf configs
      ansible.builtin.copy:
        src: configs/telegraf/qbt.conf
        dest: /etc/telegraf/telegraf.d/qbt.conf
        owner: telegraf
        group: telegraf
        mode: "600"
      notify:
        - Restart telegraf

  handlers:
    - name: Restart telegraf
      ansible.builtin.systemd:
        name: telegraf
        state: restarted
