---
- name: Include dotfiles vars
  ansible.builtin.include_vars:
    file: vars/dotfiles.yml

- name: Get user info facts
  ansible.builtin.getent:
    database: passwd

- name: Include dotfiles tasks, loop for each user
  ansible.builtin.include_tasks: "03a-dotfiles-download.yml"
  loop:
    - kism
    - root
  loop_control:
    loop_var: loop_user

- name: Replace some values in tmux.conf for root
  ansible.builtin.replace:
    path: "{{ user_home }}/.tmux.conf"
    regexp: "{{ item['regexp'] }}"
    replace: "{{ item['replace'] }}"
  loop: "{{ configure_users_dotfiles_tmux_regex }}"
