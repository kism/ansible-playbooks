---
- name: Remove packages that I want to avoid
  ansible.builtin.dnf:
    name: "{{ item }}"
    state: absent
  loop: "{{ configure_packages_server_to_remove }}"

- name: Install useful apps
  ansible.builtin.dnf:
    name: "{{ item }}"
    state: present
  failed_when: false # Happy for this to partly fail, some systems can't get all of these
  loop: "{{ configure_packages_server_to_install }}"

- name: Install packages for dnf
  ansible.builtin.dnf:
    name:
      - gnupg2
      - pipx
    state: present
