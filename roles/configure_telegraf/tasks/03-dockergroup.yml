---
- name: Check if docker group exists
  ansible.builtin.command: getent group docker
  register: docker_group_check
  changed_when: false # This just gets info
  failed_when: false # Next task checks RC

- name: Add user to docker group
  ansible.builtin.user:
    name: telegraf
    groups: docker
    append: true
  when: docker_group_check.rc == 0
