- name: Install apt Packages
  when: ansible_pkg_mgr == 'apt'
  block:
    - name: Update APT
      ansible.builtin.apt:
        update_cache: true
        upgrade: full

    - name: Install useful apps
      ansible.builtin.apt:
        install_recommends: false
        pkg: "{{ item }}"
        state: present
      ignore_errors: true
      loop: "{{ packages_to_install }}"
      tags:
        - skip_ansible_lint # Happy for this to partly fail, some systems can't get all of these
