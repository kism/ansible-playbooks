---
- name: Include tasks for all
  ansible.builtin.include_tasks: "01-all.yml"

- name: Include tasks for baremetal hosts
  when: ansible_facts['virtualization_role'] == 'host' or ansible_facts['virtualization_role'] == 'NA'
  ansible.builtin.include_tasks: "02-baremetal.yml"

- name: Block for fastfetch/neofetch so I don't want both
  block:
    - name: Install fastfetch
      ansible.builtin.package:
        name: fastfetch
        state: present

    - name: Remove neofetch
      ansible.builtin.package:
        name: neofetch
        state: absent

  rescue:
    - name: Remove neofetch
      ansible.builtin.package:
        name: neofetch
        state: present
